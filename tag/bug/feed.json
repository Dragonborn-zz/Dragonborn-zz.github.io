{
    "version": "https://jsonfeed.org/version/1",
    "title": "Dragonborn-zz's个人博客 • All posts by \"bug\" tag",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2024/02/18/android/Gson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%97%B6%E9%97%B4long%E5%80%BC%E8%BD%AC%E4%B8%BADate%E7%B1%BB%E5%9E%8B%E6%8A%A5%E9%94%99/",
            "url": "http://example.com/2024/02/18/android/Gson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%97%B6%E9%97%B4long%E5%80%BC%E8%BD%AC%E4%B8%BADate%E7%B1%BB%E5%9E%8B%E6%8A%A5%E9%94%99/",
            "title": "Gson反序列化时间long值转为Date类型报错",
            "date_published": "2024-02-18T03:28:48.555Z",
            "content_html": "<h2 id=\"gson反序列化时间long值转为date类型报错即gson无法解析位数太长的时间格式\"><a class=\"markdownIt-Anchor\" href=\"#gson反序列化时间long值转为date类型报错即gson无法解析位数太长的时间格式\">#</a> Gson 反序列化时间 long 值转为 Date 类型报错，即 Gson 无法解析位数太长的时间格式</h2>\n<h2 id=\"报错日志\"><a class=\"markdownIt-Anchor\" href=\"#报错日志\">#</a> 报错日志</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs log\">com.google.gson.JsonSyntaxException: 2022-10-21 00:00:00<br>at com.google.gson.internal.bind.DateTypeAdapter.deserializeToDate(DateTypeAdapter.java:87)<br>at com.google.gson.internal.bind.DateTypeAdapter.read(DateTypeAdapter.java:75)<br>at com.google.gson.internal.bind.DateTypeAdapter.read(DateTypeAdapter.java:46)<br>at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:131)<br>at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:222)<br>at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:131)<br>at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:222)<br>at retrofit2.converter.gson.GsonResponseBodyConverter.convert(GsonResponseBodyConverter.java:40)<br>at retrofit2.converter.gson.GsonResponseBodyConverter.convert(GsonResponseBodyConverter.java:27)<br>at retrofit2.OkHttpCall.parseResponse(OkHttpCall.java:243)<br>at retrofit2.OkHttpCall$1.onResponse(OkHttpCall.java:153)<br>at okhttp3.RealCall$AsyncCall.execute(RealCall.java:174)<br>at okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32)<br>at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)<br>at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)<br>at java.lang.Thread.run(Thread.java:920)<br>Caused by: java.text.ParseException: Failed to parse date [&quot;2022-10-21 00:00:00&quot;]: Invalid time zone indicator &#x27; &#x27;<br>at com.google.gson.internal.bind.util.ISO8601Utils.parse(ISO8601Utils.java:274)<br>at com.google.gson.internal.bind.DateTypeAdapter.deserializeToDate(DateTypeAdapter.java:85)<br>at com.google.gson.internal.bind.DateTypeAdapter.read(DateTypeAdapter.java:75) <br>at com.google.gson.internal.bind.DateTypeAdapter.read(DateTypeAdapter.java:46) <br>at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:131) <br>at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:222) <br>at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:131) <br>at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:222) <br>at retrofit2.converter.gson.GsonResponseBodyConverter.convert(GsonResponseBodyConverter.java:40) <br>at retrofit2.converter.gson.GsonResponseBodyConverter.convert(GsonResponseBodyConverter.java:27) <br>at retrofit2.OkHttpCall.parseResponse(OkHttpCall.java:243) <br>at retrofit2.OkHttpCall$1.onResponse(OkHttpCall.java:153) <br>at okhttp3.RealCall$AsyncCall.execute(RealCall.java:174) <br>at okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32) <br>at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167) <br>at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641) <br>at java.lang.Thread.run(Thread.java:920) <br>Caused by: java.lang.IndexOutOfBoundsException: Invalid time zone indicator &#x27; &#x27;<br>at com.google.gson.internal.bind.util.ISO8601Utils.parse(ISO8601Utils.java:245) <br></code></pre></td></tr></table></figure>\n<p>引发原因，返回格式解析出了问题</p>\n<figure class=\"highlight reasonml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs reasonml\"><span class=\"hljs-keyword\">new</span> Retrofit .<span class=\"hljs-constructor\">Builder()</span>.base<span class=\"hljs-constructor\">Url(Api.BASE_URL)</span>.add<span class=\"hljs-constructor\">ConverterFactory(GsonConverterFactory.<span class=\"hljs-params\">create</span>()</span>).build<span class=\"hljs-literal\">()</span>;<br></code></pre></td></tr></table></figure>\n<p>解决办法<br>\n把 <code>GsonConverterFactory.create()</code>  改成 <code>GsonConverterFactory.create(new GsonBuilder().setDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;).create())</code></p>\n",
            "tags": [
                "gson",
                "bug"
            ]
        }
    ]
}